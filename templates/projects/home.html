{% extends 'base.html' %}

{% block title %}Choose Your Project - ProjectHack{% endblock %}

{% block content %}
<div class="text-center mb-16 animate-fade-in-up">
    <h1 class="text-5xl md:text-7xl font-black text-white mb-6 leading-tight">
        Start Your <span class="gradient-text">Solo Hackathon</span>
    </h1>
    <p class="text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto leading-relaxed font-light">
        Choose a project, set your timeframe, and build something real for your CV. 
        <span class="font-semibold text-white">Get step-by-step guidance</span> and learn technologies that matter.
    </p>
</div>

<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-16">
    <div class="glass rounded-2xl p-8 card-hover border border-white/10 shadow-2xl animate-fade-in-up" style="animation-delay: 0.1s">
        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center text-3xl mb-6 shadow-lg glow">
            ‚è±Ô∏è
        </div>
        <h3 class="text-2xl font-bold text-white mb-3">Time-Bound</h3>
        <p class="text-gray-400 leading-relaxed">Choose 6, 12, 24, or 48 hours. Learn time management while building real projects.</p>
    </div>
    <div class="glass rounded-2xl p-8 card-hover border border-white/10 shadow-2xl animate-fade-in-up" style="animation-delay: 0.2s">
        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center text-3xl mb-6 shadow-lg glow-purple">
            üìö
        </div>
        <h3 class="text-2xl font-bold text-white mb-3">Step-by-Step</h3>
        <p class="text-gray-400 leading-relaxed">Get guided through each step with technologies and learning outcomes clearly explained.</p>
    </div>
    <div class="glass rounded-2xl p-8 card-hover border border-white/10 shadow-2xl animate-fade-in-up" style="animation-delay: 0.3s">
        <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center text-3xl mb-6 shadow-lg glow">
            üíº
        </div>
        <h3 class="text-2xl font-bold text-white mb-3">CV-Ready</h3>
        <p class="text-gray-400 leading-relaxed">Get a summary of skills learned, perfect for your CV and LinkedIn profile.</p>
    </div>
</div>

{% if recommended_projects %}
<div class="mb-16">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-10">
        <h2 class="text-4xl font-black text-white flex items-center mb-6 md:mb-0">
            <span class="h-1 w-20 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full mr-4"></span>
            <span class="gradient-text-animated">‚ú® Recommended for You</span>
        </h2>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
        {% for project in recommended_projects %}
            <div class="glass-light rounded-xl p-6 transition-all card-hover border border-white/10 flex flex-col">
                <div class="mb-4 flex-shrink-0">
                    <span class="inline-block px-3 py-1 rounded-full text-xs font-bold 
                        {% if project.difficulty == 'beginner' %}bg-green-500/20 text-green-300
                        {% elif project.difficulty == 'intermediate' %}bg-yellow-500/20 text-yellow-300
                        {% else %}bg-red-500/20 text-red-300{% endif %}">
                        {{ project.get_difficulty_display }}
                    </span>
                    <span class="inline-block ml-2 px-3 py-1 rounded-full text-xs font-bold bg-indigo-500/20 text-indigo-300">
                        {{ project.get_track_display }}
                    </span>
                </div>
                <h3 class="text-xl font-black text-white mb-2 flex-shrink-0">{{ project.title }}</h3>
                <p class="text-gray-400 text-sm mb-6 line-clamp-3 flex-grow">{{ project.description|truncatewords:20 }}</p>
                <a href="{% url 'projects:project_overview' project.id %}" 
                   class="inline-flex items-center justify-center w-full bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-4 py-3 rounded-lg font-bold text-sm transition-all hover:from-indigo-600 hover:to-purple-600 hover:scale-[1.02] active:scale-[0.98] mt-auto">
                    <span>View Project</span>
                    <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </a>
            </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<div class="mb-12">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-10">
        <h2 class="text-4xl font-black text-white flex items-center mb-6 md:mb-0">
            <span class="h-1 w-20 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full mr-4"></span>
            {% if recommended_projects %}All Available Projects{% else %}Available Projects{% endif %}
        </h2>
        <a href="{% url 'projects:generate_project' %}" 
           class="btn-primary text-white px-8 py-4 rounded-xl font-bold text-lg shadow-xl flex items-center justify-center space-x-2 hover:scale-105 transition-transform animate-fade-in-up">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
            <span>Generate Custom Project</span>
        </a>
    </div>
    
    {% if total_projects == 0 %}
        <div class="glass border-l-4 border-yellow-500 rounded-xl p-8 text-center shadow-2xl animate-scale-in glow">
            <div class="text-6xl mb-4 animate-pulse-slow">‚ö†Ô∏è</div>
            <p class="text-white font-bold text-xl mb-2">No projects available yet!</p>
            <p class="text-gray-400 mb-6">You need to load sample projects first.</p>
            <div class="bg-white/5 rounded-xl p-6 mt-4 text-left max-w-2xl mx-auto border border-white/10">
                <p class="text-sm font-semibold text-gray-300 mb-2">To load projects, run this command in your terminal:</p>
                <code class="block bg-gray-900 text-green-400 p-4 rounded-lg text-sm font-mono mt-3 shadow-inner border border-green-500/20">python3 manage.py load_sample_projects</code>
                <p class="text-xs text-gray-500 mt-4">This will create 12 projects across Frontend, Backend, React, Node.js, Python, and Full-Stack tracks.</p>
            </div>
        </div>
    {% elif total_projects > 0 and projects_with_steps == 0 %}
        <div class="glass border-l-4 border-yellow-500 rounded-xl p-8 text-center shadow-2xl animate-scale-in glow">
            <div class="text-6xl mb-4 animate-pulse-slow">‚ö†Ô∏è</div>
            <p class="text-white font-bold text-xl mb-2">Projects exist but have no steps!</p>
            <p class="text-gray-400 mb-6">Projects are loaded but missing step-by-step guidance.</p>
            <div class="bg-white/5 rounded-xl p-6 mt-4 text-left max-w-2xl mx-auto border border-white/10">
                <p class="text-sm font-semibold text-gray-300 mb-2">Run this command to reload projects with steps:</p>
                <code class="block bg-gray-900 text-green-400 p-4 rounded-lg text-sm font-mono mt-3 shadow-inner border border-green-500/20">python3 manage.py load_sample_projects</code>
            </div>
        </div>
    {% else %}
        {% for track_code, track_data in projects_by_track.items %}
            {% if track_data.projects %}
                <div class="mb-10 animate-slide-up">
                    <div class="flex items-center mb-6">
                        <div class="h-1 w-20 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-full mr-4"></div>
                        <h3 class="text-3xl font-black text-white">{{ track_data.name }}</h3>
                    </div>
                    
                    <div class="space-y-6">
                        {% for diff_code, diff_data in track_data.projects.items %}
                            <div class="glass rounded-2xl p-6 border border-white/10 shadow-2xl">
                                <h4 class="text-xl font-bold text-white mb-5 flex items-center">
                                    <span class="w-3 h-3 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full mr-3 animate-pulse"></span>
                                    {{ diff_data.name }} Level
                                </h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
                                    {% for project in diff_data.projects %}
                                        <div class="glass-light rounded-xl p-5 border border-white/5 card-hover flex flex-col">
                                            <h5 class="font-bold text-white mb-2 text-lg flex-shrink-0">{{ project.title }}</h5>
                                            <p class="text-sm text-gray-400 mb-6 line-clamp-2 leading-relaxed flex-grow">{{ project.description|truncatewords:20 }}</p>
                                            <a href="{% url 'projects:project_overview' project.id %}" 
                                               class="inline-flex items-center justify-center w-full bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-4 py-3 rounded-lg text-sm font-bold transition-all hover:from-indigo-600 hover:to-purple-600 hover:scale-[1.02] active:scale-[0.98] mt-auto">
                                                <span>View Project</span>
                                                <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                                </svg>
                                            </a>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    {% endif %}
</div>

<div class="glass rounded-2xl p-8 border border-white/10 shadow-2xl animate-fade-in-up">
    <h3 class="text-3xl font-black text-white mb-8 flex items-center">
        <span class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl flex items-center justify-center text-white font-bold mr-4 shadow-lg glow">1</span>
        How It Works
    </h3>
    <div class="grid md:grid-cols-2 lg:grid-cols-5 gap-4">
        <div class="glass-light rounded-xl p-5 border border-indigo-500/20 card-hover">
            <div class="text-4xl mb-3">üéØ</div>
            <p class="text-white font-semibold text-sm">Choose a project matching your skill level</p>
        </div>
        <div class="glass-light rounded-xl p-5 border border-purple-500/20 card-hover">
            <div class="text-4xl mb-3">‚è∞</div>
            <p class="text-white font-semibold text-sm">Select your timeframe (6-48 hours)</p>
        </div>
        <div class="glass-light rounded-xl p-5 border border-pink-500/20 card-hover">
            <div class="text-4xl mb-3">üìñ</div>
            <p class="text-white font-semibold text-sm">Follow step-by-step guidance</p>
        </div>
        <div class="glass-light rounded-xl p-5 border border-green-500/20 card-hover">
            <div class="text-4xl mb-3">‚úÖ</div>
            <p class="text-white font-semibold text-sm">Complete and get CV-ready summary</p>
        </div>
        <div class="glass-light rounded-xl p-5 border border-cyan-500/20 card-hover">
            <div class="text-4xl mb-3">üöÄ</div>
            <p class="text-white font-semibold text-sm">Share on GitHub and LinkedIn!</p>
        </div>
    </div>
</div>
{% endblock %}
